<!DOCTYPE html>
<html>
  <head>
    <title>GPUE</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.1" />
<title>Building GPUE :: GPUE</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

	<link href="/theme-flex/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/gpue-group.github.io\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/build/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://gpue-group.github.io/">GPUE</a>
  


  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/intro/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/intro/">Introduction to GPUE</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/intro/gpue_intro/" class="dd-item">
        <div>
          <a href="/intro/gpue_intro/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/build/" class="dd-item parent active alwaysopen haschildren
        ">
      <div>
      <a href="/build/">Building GPUE</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/build/gpue_build/" class="dd-item">
        <div>
          <a href="/build/gpue_build/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/functionality/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/functionality/">GPUE functionality</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/functionality/running_gpue/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/running_gpue/">Running GPUE</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/gauge/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/gauge/">Gauge Fields</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/vortex_2d/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/vortex_2d/">2D Vortex Tracking</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/dynamic_fields/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/dynamic_fields/">Dynamic Fields</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
      <li data-nav-id="/functionality/gpue_functionality/" class="dd-item">
        <div>
          <a href="/functionality/gpue_functionality/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/data_analysis/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/data_analysis/">Data analysis</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/data_analysis/output/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/data_analysis/output/">GPUE Output Format</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/data_analysis/python/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/data_analysis/python/">Python Scripts</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/data_analysis/matlab/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/data_analysis/matlab/">Matlab Scripts</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
      <li data-nav-id="/data_analysis/gpue_build/" class="dd-item">
        <div>
          <a href="/data_analysis/gpue_build/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/development/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/development/">Development</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/development/gpue_build/" class="dd-item">
        <div>
          <a href="/development/gpue_build/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
      <li data-nav-id="/development/html/" class="dd-item">
        <div>
          <a href="/development/html/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/intro/" >
   Introduction to GPUE</option> 
      <option value="/intro/gpue_intro/" >- </option>
  
    <option value="/build/"  selected>
   Building GPUE</option> 
      <option value="/build/gpue_build/" >- </option>
  
    <option value="/functionality/" >
   GPUE functionality</option> 
    <option value="/functionality/running_gpue/" >
  - 
   Running GPUE</option> 
  
    <option value="/functionality/gauge/" >
  - 
   Gauge Fields</option> 
  
    <option value="/functionality/vortex_2d/" >
  - 
   2D Vortex Tracking</option> 
  
    <option value="/functionality/dynamic_fields/" >
  - 
   Dynamic Fields</option> 
  
      <option value="/functionality/gpue_functionality/" >- </option>
  
    <option value="/data_analysis/" >
   Data analysis</option> 
    <option value="/data_analysis/output/" >
  - 
   GPUE Output Format</option> 
  
    <option value="/data_analysis/python/" >
  - 
   Python Scripts</option> 
  
    <option value="/data_analysis/matlab/" >
  - 
   Matlab Scripts</option> 
  
      <option value="/data_analysis/gpue_build/" >- </option>
  
    <option value="/development/" >
   Development</option> 
      <option value="/development/gpue_build/" >- </option>
      <option value="/development/html/" >- </option>
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/gpue-group.github.io\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>Building GPUE</h1>
    
    
    



<ul class="children children-h2">

<span><h2>
		<a href="/build/gpue_build/" ></a></h2>
<p></p>
</span>
</ul>

<p>GPUE is designed with both a traditional Makefile and CMake, both of which may be used for different purposes, depending on the hardware available.</p>

<h2 id="dependencies-and-hardware">Dependencies and Hardware</h2>

<p>We attempted to keep the dependency list small for GPUE, so we only require the following dependencies:</p>

<ol>
<li>CUDA (version $&gt;=$ 7.5.18)</li>
<li>CUFFT (bundled with CUDA)</li>
<li>GCC or clang</li>
<li>CMake (version $&gt;=$ 3.8; optional)</li>
</ol>

<p>GPUE performs computation almost entirely on GPU hardware, and the <code>sm_2.0</code> (Fermi) to <code>sm_7.0</code> (Volta) architectures are all supported.
A list of all cards within these ranges can be found <a href="https://en.wikipedia.org/wiki/CUDA#GPUs_supported">on wikipedia</a>.</p>

<h2 id="makefile">Makefile</h2>

<p>Here a slightly modified GPUE Makefile:</p>

<pre><code>CUDA_HOME = /path/to/cuda/
GPU_ARCH        = sm_XX
OS:=    $(shell uname)
ifeq ($(OS),Darwin)
CUDA_LIB        = $(CUDA_HOME)/lib
CUDA_HEADER     = $(CUDA_HOME)/include
CC              = $(CUDA_HOME)/bin/nvcc -ccbin /usr/bin/clang --ptxas-options=-v
CFLAGS          = -g -std=c++11 -Wno-deprecated-gpu-targets
else
CUDA_LIB        = $(CUDA_HOME)/lib64
CUDA_HEADER     = $(CUDA_HOME)/include
CC              = $(CUDA_HOME)/bin/nvcc --ptxas-options=-v --compiler-options -Wall
CHOSTFLAGS      = #-fopenmp
CFLAGS          = -g -O0 -std=c++11 -Xcompiler '-std=c++11' -Xcompiler '-fopenmp'
endif

CUDA_FLAGS      = -lcufft

CLINKER         = $(CC)
RM              = /bin/rm
INCFLAGS        = -I$(CUDA_HEADER)
LDFLAGS         = -L$(CUDA_LIB)
EXECS           = gpue # BINARY NAME HERE

DEPS = ./include/constants.h ./include/ds.h ./include/edge.h ./include/evolution.h 
./include/fileIO.h ./include/init.h ./include/kernels.h ./include/lattice.h ./include/manip.h
./include/minions.h ./include/node.h ./include/operators.h ./include/parser.h ./include/split_op.h
./include/tracker.h ./include/unit_test.h ./include/vort.h ./include/vortex_3d.h ./include/dynamic.h

OBJ = fileIO.o kernels.o split_op.o tracker.o minions.o ds.o edge.o node.o lattice.o manip.o
vort.o parser.o evolution.o init.o unit_test.o operators.o vortex_3d.o dynamic.o

%.o: ./src/%.cc $(DEPS)
        $(CC) -c -o $@ $(INCFLAGS) $(CFLAGS) $(LDFLAGS) -Xcompiler &quot;-fopenmp&quot; -arch=$(GPU_ARCH) $&lt;

%.o: ./src/%.cu $(DEPS)
        $(CC) -c -o $@ $(INCFLAGS) $(CFLAGS) $(LDFLAGS) $(CUDA_FLAGS) -Xcompiler &quot;-fopenmp&quot; -arch=$(GPU_ARCH) $&lt; -dc

gpue: $(OBJ)
        $(CC) -o $@ $(INCFLAGS) $(CFLAGS) $(LDFLAGS) $(CUDA_FLAGS) -Xcompiler &quot;-fopenmp&quot; -arch=$(GPU_ARCH) $^

clean:
        @-$(RM) -f r_0 Phi_0 E* px_* py_0* xPy* xpy* ypx* x_* y_* yPx* p0* p1* p2*
EKp* EVr* gpot wfc* Tpot 0* V_* K_* Vi_* Ki_* 0i* k s_* si_* *.o *~ PI* $(EXECS) $(OTHER_EXECS)
*.dat *.eps *.ii *.i *cudafe* *fatbin* *hash* *module* *ptx test* vort* v_opt*;
</code></pre>

<p>To use the Makefile, the first 2 lines must be modified to reflect your desired <code>cuda/</code> path and the architecture of your GPU device.
After this, simply <code>make</code> to build the code.
If rebuilding is necessary, run <code>make clean</code> then <code>make</code>.</p>

<p>If you are developing GPUE, this file will need to be modified as new code is developed.</p>

<h2 id="cmake">CMake</h2>

<p>CMake is the preferred building system for GPUE; however, if a CMake version $&gt;=$ 3.8 must be used.
In this case, run</p>

<pre><code>cmake .
</code></pre>

<p>in the primary GPUE directory and then run <code>make</code> as in the Makefile example.
<code>make clean</code> will clean the directory for rebuilding.</p>

<h2 id="testing-gpue">Testing GPUE</h2>

<p>Once GPUE is built, please run unit tests with <code>./gpue -u</code> and make sure everything passes.
If there is a failure in the build, please create an issue on <a href="https://github.com/GPUE-group/GPUE">GitHub</a>.</p>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    inlineMath: [['$','$'], ['\\(','\\)']],
    displayMath: [['$$','$$'], ['\[','\]']],
    processEscapes: true,
    processEnvironments: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre','code'],
    TeX: { equationNumbers: { autoNumber: "AMS" },
         extensions: ["AMSmath.js", "AMSsymbols.js"] }
  }
});
</script>







    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/intro/gpue_intro/" title=""> <i class="fa fa-chevron-left"></i><label></label></a>
    <a class="nav nav-next" href="/build/gpue_build/" title="" style="margin-right: 0px;"><label></label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="https://github.com/gpue-group/gpue-group.github.iobuild/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>