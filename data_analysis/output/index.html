<!DOCTYPE html>
<html>
  <head>
    <title>GPUE</title>
    
      <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="generator" content="Hugo 0.40.1" />
<title>GPUE Output Format :: GPUE</title>
<link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
<link href="/css/font-awesome.min.css" rel="stylesheet">
<link href="/css/nucleus.css" rel="stylesheet">
<link href="/theme-flex/style.css" rel="stylesheet">

	<link href="/theme-flex/variant-blue.css" rel="stylesheet">

<link rel="stylesheet" href="/css/bootstrap.min.css">
<script src="/js/jquery-2.x.min.js"></script>
<script type="text/javascript">
      var baseurl = "https:\/\/gpue-group.github.io\/";
</script>
<meta name="description" content="">



    
  </head>
  <body data-url="/data_analysis/output/">
    
      <header>
  <div class="logo">
    
	
  
    <a class="baselink" href="https://gpue-group.github.io/">GPUE</a>
  

  </div>
  <div class="burger"><a href="javascript:void(0);" style="font-size:15px;">&#9776;</a></div>
    <nav class="shortcuts">
            <li class="" role="">
                <a href="https://github.com/gpue-group/gpue"  rel="noopener">
                  <i class='fa fa-github'></i> <label>GPUE repo</label>
                </a>
            </li>
            <li class="" role="">
                <a href="https://github.com/gpue-group/gpue/archive/master.zip"  rel="noopener">
                  <i class='fa fa-cloud-download'></i> <label>Download</label>
                </a>
            </li>
            <li class="" role="">
                <a href="/development/html/"  rel="noopener">
                  <i class='fa fa-bookmark'></i> <label>GPUE API</label>
                </a>
            </li>
    </nav>
</header>
<article>
  <aside>
    <ul class="menu">
          <li data-nav-id="/" class="dd-item">
          <a href="/">
            <i class="fa fa-fw fa-home"></i>
          </a>
          </li>
    <li data-nav-id="/intro/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/intro/">Introduction to GPUE</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/intro/gpue_intro/" class="dd-item">
        <div>
          <a href="/intro/gpue_intro/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/build/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/build/">Building GPUE</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/functionality/">GPUE functionality</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/functionality/running_gpue/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/running_gpue/">Running GPUE</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/gauge/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/gauge/">Gauge Fields</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/vortex_2d/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/vortex_2d/">2D Vortex Tracking</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/functionality/dynamic_fields/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/functionality/dynamic_fields/">Dynamic Fields</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/data_analysis/" class="dd-item parent alwaysopen haschildren
        ">
      <div>
      <a href="/data_analysis/">Data analysis</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
    <li data-nav-id="/data_analysis/output/" class="dd-item parent active alwaysopen
        ">
      <div>
      <a href="/data_analysis/output/">GPUE Output Format</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/data_analysis/python/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/data_analysis/python/">Python Scripts</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
    <li data-nav-id="/data_analysis/matlab/" class="dd-item alwaysopen
        ">
      <div>
      <a href="/data_analysis/matlab/">Matlab Scripts</a><i class="fa fa-circle-thin read-icon"></i>
      </div>
    </li>
        </ul>
    </li>
    <li data-nav-id="/development/" class="dd-item alwaysopen haschildren
        ">
      <div>
      <a href="/development/">Development</a>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </div>
        <ul>
      <li data-nav-id="/development/html/" class="dd-item">
        <div>
          <a href="/development/html/">
            
          </a><i class="fa fa-circle-thin read-icon"></i>
        </div>
    </li>
        </ul>
    </li>




    </ul>
    <section>
    </section>
  </aside>
  <section class="page">
    
    <div class="nav-select">
      <center>Navigation : 
        <select onchange="javascript:location.href = this.value;">
          
    <option value="/intro/" >
   Introduction to GPUE</option> 
      <option value="/intro/gpue_intro/" >- </option>
  
    <option value="/build/" >
   Building GPUE</option> 
  
    <option value="/functionality/" >
   GPUE functionality</option> 
    <option value="/functionality/running_gpue/" >
  - 
   Running GPUE</option> 
  
    <option value="/functionality/gauge/" >
  - 
   Gauge Fields</option> 
  
    <option value="/functionality/vortex_2d/" >
  - 
   2D Vortex Tracking</option> 
  
    <option value="/functionality/dynamic_fields/" >
  - 
   Dynamic Fields</option> 
  
  
    <option value="/data_analysis/" >
   Data analysis</option> 
    <option value="/data_analysis/output/"  selected>
  - 
   GPUE Output Format</option> 
  
    <option value="/data_analysis/python/" >
  - 
   Python Scripts</option> 
  
    <option value="/data_analysis/matlab/" >
  - 
   Matlab Scripts</option> 
  
  
    <option value="/development/" >
   Development</option> 
      <option value="/development/html/" >- </option>
  



        </select>
      </center>
    </div>
      <div>
        <div class="searchbox">
          <input data-search-input id="search-by" type="text" placeholder="Search...">
        </div>
        <script type="text/javascript" src="/js/lunr.min.js"></script>
        <script type="text/javascript" src="/js/auto-complete.js"></script>
        <link href="/css/auto-complete.css" rel="stylesheet">
        <script type="text/javascript">
          
              var baseurl = "https:\/\/gpue-group.github.io\/";
          
        </script>
        <script type="text/javascript" src="/js/search.js"></script>
      </div>
    

    <h1>GPUE Output Format</h1>
    
    
    



<p>GPUE outputs data via HDF5 in a single <code>output.h5</code> file containing simulation data and parameters.</p>

<p>To output the wavefunction every printStep (<code>-p N</code>), set the <code>-W</code> flag.</p>

<p>For example,</p>

<pre><code>./gpue -e 1000 -W -p 100
</code></pre>

<p>Will run GPUE in real-time for 1000 steps and output the wavefunction every 100 steps.</p>

<p>The <code>-d</code> flag sets the data directory relative to the executor, and will create the given directory if it does not exist.
This defaults to <code>data/</code></p>

<h2 id="reading-the-output-in-various-languages">Reading the output in various languages</h2>

<p>The HDF5 output format can be read by many languages using their respective HDF5 bindings.
Here we will look at how to read the data in Python and in Julia.</p>

<p>The following examples open the output file, and read the wavefunction and some of the simulation&rsquo;s attributes</p>

<p>Python:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># Import the hdf5 python binding</span>
<span style="color:#f92672">import</span> <span style="color:#111">h5py</span>

<span style="color:#75715e"># Open the file in read-only mode</span>
<span style="color:#111">f</span> <span style="color:#f92672">=</span> <span style="color:#111">h5py</span><span style="color:#f92672">.</span><span style="color:#111">File</span><span style="color:#111">(</span><span style="color:#d88200">&#34;data/output.h5&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;r&#34;</span><span style="color:#111">)</span>

<span style="color:#75715e"># Load the wavefunction</span>
<span style="color:#111">wfc_dataset</span> <span style="color:#f92672">=</span> <span style="color:#111">f</span><span style="color:#111">[</span><span style="color:#d88200">&#34;/WFC/CONST/0&#34;</span><span style="color:#111">]</span>

<span style="color:#75715e"># Compose the dataset into a complex-valued numpy array</span>
<span style="color:#111">wfc</span> <span style="color:#f92672">=</span> <span style="color:#111">wfc_dataset</span><span style="color:#111">[</span><span style="color:#d88200">&#34;re&#34;</span><span style="color:#111">]</span> <span style="color:#f92672">+</span> <span style="color:#111">wfc_dataset</span><span style="color:#111">[</span><span style="color:#d88200">&#34;im&#34;</span><span style="color:#111">]</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1j</span>

<span style="color:#75715e"># Load the dimension parameters</span>
<span style="color:#75715e"># Since default values are not stored on the output, pass a default into get</span>
<span style="color:#111">wfc_num</span> <span style="color:#f92672">=</span> <span style="color:#111">f</span><span style="color:#f92672">.</span><span style="color:#111">attrs</span><span style="color:#f92672">.</span><span style="color:#111">get</span><span style="color:#111">(</span><span style="color:#d88200">&#34;wfc_num&#34;</span><span style="color:#111">,</span> <span style="color:#111">default</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span><span style="color:#111">)</span>
<span style="color:#111">xDim</span> <span style="color:#f92672">=</span> <span style="color:#111">f</span><span style="color:#f92672">.</span><span style="color:#111">attrs</span><span style="color:#f92672">.</span><span style="color:#111">get</span><span style="color:#111">(</span><span style="color:#d88200">&#34;xDim&#34;</span><span style="color:#111">,</span> <span style="color:#ae81ff">256</span><span style="color:#111">)</span>
<span style="color:#111">yDim</span> <span style="color:#f92672">=</span> <span style="color:#111">f</span><span style="color:#f92672">.</span><span style="color:#111">attrs</span><span style="color:#f92672">.</span><span style="color:#111">get</span><span style="color:#111">(</span><span style="color:#d88200">&#34;yDim&#34;</span><span style="color:#111">,</span> <span style="color:#ae81ff">256</span><span style="color:#111">)</span>

<span style="color:#75715e"># Compare the shape</span>
<span style="color:#00a8c8">print</span><span style="color:#111">((</span><span style="color:#111">wfc_num</span><span style="color:#111">,</span> <span style="color:#111">xDim</span><span style="color:#111">,</span> <span style="color:#111">yDim</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#111">(</span><span style="color:#111">wfc</span><span style="color:#f92672">.</span><span style="color:#111">shape</span><span style="color:#111">))</span> <span style="color:#75715e"># True if wfc is 2D</span></code></pre></div>
<p>Julia:</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-julia" data-lang="julia"><span style="color:#75715e"># Import the hdf5 julia binding</span>
<span style="color:#00a8c8">using</span> <span style="color:#111">HDF5</span>

<span style="color:#75715e"># Open the file in read-only mode</span>
<span style="color:#111">f</span> <span style="color:#f92672">=</span> <span style="color:#111">h5open</span><span style="color:#111">(</span><span style="color:#d88200">&#34;data/output.h5&#34;</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;r&#34;</span><span style="color:#111">)</span>

<span style="color:#75715e"># Load the wavefunction dataset</span>
<span style="color:#111">wfc_dataset</span> <span style="color:#f92672">=</span> <span style="color:#111">f</span><span style="color:#111">[</span><span style="color:#d88200">&#34;/WFC/CONST/0&#34;</span><span style="color:#111">]</span>

<span style="color:#75715e"># Load the wavefunction as a flat array, since HDF5.jl doesn&#39;t support indexing on compositely typed datasets</span>
<span style="color:#111">wfc_arr</span> <span style="color:#f92672">=</span> <span style="color:#111">read</span><span style="color:#111">(</span><span style="color:#111">f</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;/WFC/CONST/0&#34;</span><span style="color:#111">)</span>

<span style="color:#75715e"># Convert the wavefunction array to complex numbers</span>
<span style="color:#111">wfc_arr</span> <span style="color:#f92672">=</span> <span style="color:#111">map</span><span style="color:#111">(</span><span style="color:#111">x</span> <span style="color:#f92672">-&gt;</span> <span style="color:#111">x</span><span style="color:#f92672">.</span><span style="color:#111">data</span><span style="color:#111">[</span><span style="color:#ae81ff">1</span><span style="color:#111">]</span> <span style="color:#f92672">+</span> <span style="color:#111">x</span><span style="color:#f92672">.</span><span style="color:#111">data</span><span style="color:#111">[</span><span style="color:#ae81ff">2</span><span style="color:#111">]</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1</span><span style="color:#111">im</span><span style="color:#111">,</span> <span style="color:#111">wfc_arr</span><span style="color:#111">)</span>

<span style="color:#75715e"># Reshape the wavefunction array to the correct dimensions</span>
<span style="color:#111">wfc_arr</span> <span style="color:#f92672">=</span> <span style="color:#111">reshape</span><span style="color:#111">(</span><span style="color:#111">wfc_arr</span><span style="color:#111">,</span> <span style="color:#111">size</span><span style="color:#111">(</span><span style="color:#111">w</span><span style="color:#111">))</span>


<span style="color:#75715e"># Load the attributes on the file</span>
<span style="color:#111">attr_obj</span> <span style="color:#f92672">=</span> <span style="color:#111">attrs</span><span style="color:#111">(</span><span style="color:#111">f</span><span style="color:#111">)</span>

<span style="color:#75715e"># Load the dimension parameters</span>
<span style="color:#75715e"># Since default values are not stored on the output, set defaults and check for attribute existence</span>
<span style="color:#111">wfc_num</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>
<span style="color:#111">xDim</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>
<span style="color:#111">yDim</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">256</span>

<span style="color:#75715e"># Load wfc_num</span>
<span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">exists</span><span style="color:#111">(</span><span style="color:#111">attr_obj</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;wfc_num&#34;</span><span style="color:#111">))</span>
  <span style="color:#111">wfc_num</span> <span style="color:#f92672">=</span> <span style="color:#111">read</span><span style="color:#111">(</span><span style="color:#111">attr_obj</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;wfc_num&#34;</span><span style="color:#111">)[</span><span style="color:#ae81ff">0</span><span style="color:#111">]</span>
<span style="color:#00a8c8">end</span>

<span style="color:#75715e"># Load xDim</span>
<span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">exists</span><span style="color:#111">(</span><span style="color:#111">attr_obj</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;xDim&#34;</span><span style="color:#111">))</span>
  <span style="color:#111">xDim</span> <span style="color:#f92672">=</span> <span style="color:#111">read</span><span style="color:#111">(</span><span style="color:#111">attr_obj</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;xDim&#34;</span><span style="color:#111">)[</span><span style="color:#ae81ff">0</span><span style="color:#111">]</span>
<span style="color:#00a8c8">end</span>

<span style="color:#75715e"># Load yDim</span>
<span style="color:#00a8c8">if</span> <span style="color:#111">(</span><span style="color:#111">exists</span><span style="color:#111">(</span><span style="color:#111">attr_obj</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;yDim&#34;</span><span style="color:#111">))</span>
  <span style="color:#111">yDim</span> <span style="color:#f92672">=</span> <span style="color:#111">read</span><span style="color:#111">(</span><span style="color:#111">attr_obj</span><span style="color:#111">,</span> <span style="color:#d88200">&#34;yDim&#34;</span><span style="color:#111">)[</span><span style="color:#ae81ff">0</span><span style="color:#111">]</span>
<span style="color:#00a8c8">end</span>

<span style="color:#75715e"># Compare the shape</span>
<span style="color:#75af00">@assert</span> <span style="color:#111">size</span><span style="color:#111">(</span><span style="color:#111">wfc_arr</span><span style="color:#111">)</span> <span style="color:#f92672">==</span> <span style="color:#111">(</span><span style="color:#111">xDim</span><span style="color:#111">,</span> <span style="color:#111">yDim</span><span style="color:#111">,</span> <span style="color:#111">wfc_num</span><span style="color:#111">)</span></code></pre></div>
<p>For more on hdf5 storage, see <a href="https://portal.hdfgroup.org/display/HDF5/Introduction+to+HDF5">the official documentation.</a></p>

<p>The documentation for the HDF5 bindings are found here: <a href="http://docs.h5py.org/en/stable/">Python</a>, <a href="https://github.com/JuliaIO/HDF5.jl">Julia</a></p>



    
    
        <div class="chevrons">
    <div id="navigation">
<a class="nav nav-prev" href="/data_analysis/" title="Data analysis"> <i class="fa fa-chevron-left"></i><label>Data analysis</label></a>
    <a class="nav nav-next" href="/data_analysis/python/" title="Python Scripts" style="margin-right: 0px;"><label>Python Scripts</label><i class="fa fa-chevron-right"></i></a></div>
  </div>

  </section>
</article>

<footer>

<div class="footline">
    

    

  

    <div class="github-link">
      <a href="https://github.com/gpue-group/gpue-group.github.iodata_analysis/output/_index.md" target="blank"><i class="fa fa-code-fork"></i>
        Improve this page</a>
    </div>
  </div>


	<div>


  
    Create a content/_footer.md file to customize the footer content
  



	</div>
</footer>

<script src="/js/clipboard.min.js"></script>

<link href="/css/featherlight.min.css" rel="stylesheet">
<script src="/js/featherlight.min.js"></script>



<script src="/theme-flex/script.js"></script>

    

    
    

    
  </body>
</html>